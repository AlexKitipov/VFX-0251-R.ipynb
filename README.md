# VFX-0251-R.ipynb

# Valkiria VX ‚öîÔ∏è  
**AI Ensemble Trading Platform**

–í–∞–ª–∫–∏—Ä–∏—è –í–• –µ –µ–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª–Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –∑–∞ –∞–ª–≥–æ—Ä–∏—Ç–º–∏—á–Ω–∞ —Ç—ä—Ä–≥–æ–≤–∏—è, –∏–∑–≥—Ä–∞–¥–µ–Ω–∞ –∫–∞—Ç–æ –∞–Ω—Å–∞–º–±—ä–ª –æ—Ç —Ç—Ä–∏ –∞–≥–µ–Ω—Ç–∞.  
–í—Å–µ–∫–∏ –∞–≥–µ–Ω—Ç –∏–º–∞ —Å–æ–±—Å—Ç–≤–µ–Ω–∞ —Ä–æ–ª—è, –æ–±—É—á–∞–≤–∞ —Å–µ —á—Ä–µ–∑ –ø–æ–¥—Å–∏–ª–≤–∞—â–æ –æ–±—É—á–µ–Ω–∏–µ (RL), –∑–∞–ø–∏—Å–≤–∞ —á–µ–∫–ø–æ–π–Ω—Ç–∏ –∏ —Å–µ –ø—Ä–µ–æ–±—É—á–∞–≤–∞, –∑–∞ –¥–∞ –ø–æ—Å—Ç–∏–≥–Ω–µ –ø–æ-–¥–æ–±—Ä–∞ —Ö–∞—Ä–º–æ–Ω–∏—è —Å –ø–∞–∑–∞—Ä–∞.  

---

## üìí Colab Notebook
–ó–∞ –±—ä—Ä–∑ —Å—Ç–∞—Ä—Ç –∏ –µ–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∏ –º–æ–∂–µ—Ç–µ –¥–∞ –∏–∑–ø–æ–ª–∑–≤–∞—Ç–µ –≥–æ—Ç–æ–≤–∏—è Colab –±–µ–ª–µ–∂–Ω–∏–∫:  

[![Open In Colab](https://colab.research.google.com/assets/colab-badge.svg)](https://colab.research.google.com/drive/131jzBefP_3nFULQ6Bbu3czVNhGU8nd1r#scrollTo=DcC_HZZfaGE)

**Notebook:** `VFX-0251 R.ipynb`  

–ë–µ–ª–µ–∂–Ω–∏–∫—ä—Ç —Å—ä–¥—ä—Ä–∂–∞:  
- ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–∞ —Å—Ä–µ–¥–∞—Ç–∞ –∏ –≥–ª–æ–±–∞–ª–Ω–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏  
- üìà –ó–∞—Ä–µ–∂–¥–∞–Ω–µ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞ –¥–∞–Ω–Ω–∏ (Yahoo Finance –∏–ª–∏ CSV)  
- üß† –û–±—É—á–µ–Ω–∏–µ –Ω–∞ –∞–≥–µ–Ω—Ç–∏—Ç–µ —Å RL –∞–ª–≥–æ—Ä–∏—Ç–º–∏ (–Ω–∞–ø—Ä. A2C)  
- üíæ –ß–µ–∫–ø–æ–π–Ω—Ç–∏–Ω–≥ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ –º–æ–¥–µ–ª–∏  
- üìä –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ —Ä–µ–∑—É–ª—Ç–∞—Ç–∏—Ç–µ  

---

## ‚ú® –û—Å–Ω–æ–≤–Ω–∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏
- üìà **–ì—ä–≤–∫–∞–≤–∏ –∏–∑—Ç–æ—á–Ω–∏—Ü–∏ –Ω–∞ –¥–∞–Ω–Ω–∏** ‚Äì Yahoo Finance –∏–ª–∏ CSV —Ñ–∞–π–ª–æ–≤–µ  
- ‚è±Ô∏è **–ú–Ω–æ–∂–µ—Å—Ç–≤–æ —Ç–∞–π–º—Ñ—Ä–µ–π–º–∏** ‚Äì –æ—Ç –¥–Ω–µ–≤–Ω–∏ –¥–æ –º–∏–Ω—É—Ç–Ω–∏ –¥–∞–Ω–Ω–∏  
- ‚öôÔ∏è **–ì–ª–æ–±–∞–ª–Ω–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏** ‚Äì –∫–∞–ø–∏—Ç–∞–ª, lookback –ø—Ä–æ–∑–æ—Ä–µ—Ü, —Ä–∏—Å–∫ –º–µ–Ω–∏–¥–∂–º—ä–Ω—Ç  
- üõ°Ô∏è **–†–∏—Å–∫ –∫–æ–Ω—Ç—Ä–æ–ª** ‚Äì —Å—Ç–æ–ø-–ª–æ—Å, —Ç–µ–π–∫-–ø—Ä–æ—Ñ–∏—Ç, –º–∞–∫—Å–∏–º–∞–ª–µ–Ω —Å–ø–∞–¥ –Ω–∞ –ø–æ—Ä—Ç—Ñ–µ–π–ª–∞, —Ç—Ä–µ–π–ª–∏–Ω–≥ —Å—Ç–æ–ø  
- üì¶ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ –º–æ–¥–µ–ª–∏** ‚Äì –∑–∞–ø–∞–∑–≤–∞–Ω–µ –∏ –∑–∞—Ä–µ–∂–¥–∞–Ω–µ –Ω–∞ –∞–≥–µ–Ω—Ç–∏, –ø—Ä–æ–¥—ä–ª–∂–∞–≤–∞–Ω–µ –Ω–∞ –æ–±—É—á–µ–Ω–∏–µ –æ—Ç —á–µ–∫–ø–æ–π–Ω—Ç  
- üß† **–ü–æ–¥—Å–∏–ª–≤–∞—â–æ –æ–±—É—á–µ–Ω–∏–µ** ‚Äì –ø–æ–¥–¥—Ä—ä–∂–∫–∞ –Ω–∞ –∞–ª–≥–æ—Ä–∏—Ç–º–∏ –∫–∞—Ç–æ A2C  
- üìä **–ë–µ–∫—Ç–µ—Å—Ç –∏ –∞–Ω–∞–ª–∏–∑** ‚Äì —Ä–∞–∑–¥–µ–ª—è–Ω–µ –Ω–∞ –¥–∞–Ω–Ω–∏ –∑–∞ –æ–±—É—á–µ–Ω–∏–µ –∏ —Ç–µ—Å—Ç, –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ —Ä–µ–∑—É–ª—Ç–∞—Ç–∏—Ç–µ  

---

## üöÄ –°—Ç–∞—Ä—Ç–∏—Ä–∞–Ω–µ –ª–æ–∫–∞–ª–Ω–æ
1. –ö–ª–æ–Ω–∏—Ä–∞–π—Ç–µ —Ä–µ–ø–æ—Ç–æ:  
   ```bash
   https://github.com/AlexKitipov/VFX-0251-R.ipynb.git

## üì∏ –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–∞ —Ç–∞–±–ª–æ—Ç–æ

### –°—Ç—ä–ø–∫–∞ 1: –ù–∞—á–∞–ª–µ–Ω –∏–∑–≥–ª–µ–¥
![–ù–∞—á–∞–ª–µ–Ω –∏–∑–≥–ª–µ–¥](screenshot-1759668688194.png)

### –°—Ç—ä–ø–∫–∞ 2: –ó–∞—Ä–µ–∂–¥–∞–Ω–µ –Ω–∞ –¥–∞–Ω–Ω–∏
![–ó–∞—Ä–µ–∂–¥–∞–Ω–µ –Ω–∞ –¥–∞–Ω–Ω–∏](screenshot-1759668801172.png)

### –°—Ç—ä–ø–∫–∞ 3: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –Ω–∞ —Å—Ä–µ–¥–∞—Ç–∞
![–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è](screenshot-1759669011626.png)

### –°—Ç—ä–ø–∫–∞ 4: –û–±—É—á–µ–Ω–∏–µ –Ω–∞ –∞–≥–µ–Ω—Ç–∏—Ç–µ
![–û–±—É—á–µ–Ω–∏–µ](screenshot-1759669196553.png)

### –°—Ç—ä–ø–∫–∞ 5: –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ —Ä–µ–∑—É–ª—Ç–∞—Ç–∏
![–†–µ–∑—É–ª—Ç–∞—Ç–∏](screenshot-1759669509924.png)


---

‚ö†Ô∏è **–í–ê–ñ–ù–û: –ù–∞—Å—Ç—Ä–æ–π–∫–∏, –∫–æ–∏—Ç–æ —Å–∏–ª–Ω–æ –≤–ª–∏—è—è—Ç –Ω–∞ –æ–±—É—á–µ–Ω–∏–µ—Ç–æ –Ω–∞ –∞–≥–µ–Ω—Ç–∏—Ç–µ**

–ó–∞ –¥–∞ –ø–æ—Å—Ç–∏–≥–Ω–µ—Ç–µ —Å—Ç–∞–±–∏–ª–Ω–æ –∏ —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ –æ–±—É—á–µ–Ω–∏–µ, –µ –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–∞ –Ω–∞—Å—Ç—Ä–æ–∏—Ç–µ –ø—Ä–∞–≤–∏–ª–Ω–æ —Å–ª–µ–¥–Ω–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏:

### üìå –†–∞–∑–º–µ—Ä –Ω–∞ –ø–æ–∑–∏—Ü–∏—è—Ç–∞ (`position_size`)
- **–ü–æ –ø–æ–¥—Ä–∞–∑–±–∏—Ä–∞–Ω–µ:** 18% –æ—Ç –∫–∞–ø–∏—Ç–∞–ª–∞ (—Ç–≤—ä—Ä–¥–µ –∞–≥—Ä–µ—Å–∏–≤–Ω–æ)
- **–ü—Ä–µ–ø–æ—Ä—ä—á–∏—Ç–µ–ª–Ω–æ:** 0.1%, 0.01% –∏–ª–∏ –º–∞–∫—Å–∏–º—É–º 1%  
  –¢–æ–≤–∞ –Ω–∞–º–∞–ª—è–≤–∞ —Ä–∏—Å–∫–∞ –∏ –ø–æ–∑–≤–æ–ª—è–≤–∞ –Ω–∞ –∞–≥–µ–Ω—Ç–∏—Ç–µ –¥–∞ —É—á–∞—Ç –±–µ–∑ –¥–∞ —Ñ–∞–ª–∏—Ä–∞—Ç –ø—Ä–∏ –º–∞–ª–∫–∏ –≥—Ä–µ—à–∫–∏.

### üí∏ –ö–æ–º–∏—Å–∏–æ–Ω–Ω–∞ (`commission`)
- **–ü–æ –ø–æ–¥—Ä–∞–∑–±–∏—Ä–∞–Ω–µ:** 0.1  
- **–ü—Ä–µ–ø–æ—Ä—ä—á–∏—Ç–µ–ª–Ω–æ:** 0.01 –∏–ª–∏ –ø–æ-–Ω–∏—Å–∫–∞  
  –í–∏—Å–æ–∫–∞—Ç–∞ –∫–æ–º–∏—Å–∏–æ–Ω–Ω–∞ –∏–∑—è–∂–¥–∞ –ø–µ—á–∞–ª–±–∞—Ç–∞ –∏ –∑–∞—Ç—Ä—É–¥–Ω—è–≤–∞ –æ–±—É—á–µ–Ω–∏–µ—Ç–æ.

### üß† Learning Rate (`learning_rate`)
- **–ü—Ä–µ–ø–æ—Ä—ä—á–∏—Ç–µ–ª–µ–Ω –¥–∏–∞–ø–∞–∑–æ–Ω:** `1e-4` –¥–æ `5e-4`  
  –¢–≤—ä—Ä–¥–µ –≤–∏—Å–æ–∫ learning rate –≤–æ–¥–∏ –¥–æ –Ω–µ—Å—Ç–∞–±–∏–ª–Ω–æ –æ–±—É—á–µ–Ω–∏–µ, —Ç–≤—ä—Ä–¥–µ –Ω–∏—Å—ä–∫ ‚Äî –¥–æ –±–∞–≤–Ω–æ —É—á–µ–Ω–µ.

### ‚è≥ Lookback Window (`lookback`)
- –û–ø—Ç–∏–º–∞–ª–µ–Ω –¥–∏–∞–ø–∞–∑–æ–Ω: `20` –¥–æ `100`  
  –ü–æ-–∫—ä—Å –ø—Ä–æ–∑–æ—Ä–µ—Ü = –ø–æ-–±—ä—Ä–∑–∞ —Ä–µ–∞–∫—Ü–∏—è, –Ω–æ –ø–æ-–º–∞–ª–∫–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç. –ü–æ-–¥—ä–ª—ä–≥ = –ø–æ-–¥–æ–±—Ä–∞ –∞–¥–∞–ø—Ç–∞—Ü–∏—è.

### üõ°Ô∏è Risk Management
- **Stop Loss / Take Profit:** –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Ä–∞–∑—É–º–Ω–∏ –Ω–∏–≤–∞ —Å–ø–æ—Ä–µ–¥ –≤–æ–ª–∞—Ç–∏–ª–Ω–æ—Å—Ç—Ç–∞.
- **Max Drawdown:** –û–≥—Ä–∞–Ω–∏—á–µ—Ç–µ –¥–æ 10‚Äì20% –∑–∞ —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ –ø–æ–≤–µ–¥–µ–Ω–∏–µ.
- **Trailing Stop:** –ê–∫—Ç–∏–≤–∏—Ä–∞–π—Ç–µ –∑–∞ –¥–∏–Ω–∞–º–∏—á–Ω–∞ –∑–∞—â–∏—Ç–∞ –Ω–∞ –ø–µ—á–∞–ª–±–∞—Ç–∞.

---

‚ùó –ù–µ–ø—Ä–∞–≤–∏–ª–Ω–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –º–æ–≥–∞—Ç –¥–∞ –¥–æ–≤–µ–¥–∞—Ç –¥–æ –Ω–µ—É—Å–ø–µ—à–Ω–æ –æ–±—É—á–µ–Ω–∏–µ, —Ñ–∞–ª–∏—Ç–∏ –Ω–∞ –∞–≥–µ–Ω—Ç–∏ –∏–ª–∏ –Ω–µ—Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–∏ —Ä–µ–∑—É–ª—Ç–∞—Ç–∏. –ü—Ä–µ–ø–æ—Ä—ä—á–≤–∞ —Å–µ –¥–∞ –∑–∞–ø–æ—á–Ω–µ—Ç–µ —Å –∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω–∏ —Å—Ç–æ–π–Ω–æ—Å—Ç–∏ –∏ –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –¥–∞ –µ–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∏—Ä–∞—Ç–µ.

---

üöÄ **–°—Ç–∞—Ä—Ç–∏—Ä–∞–Ω–µ –Ω–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –≤ Colab**

–°–ª–µ–¥ –∫–∞—Ç–æ –∑–∞—Ä–µ–¥–∏—Ç–µ –≤—Å–∏—á–∫–∏ –∫–ª–µ—Ç–∫–∏ –≤ –±–µ–ª–µ–∂–Ω–∏–∫–∞ (`VFX_0251_R.ipynb`), —Å–ª–µ–¥–≤–∞–π—Ç–µ —Ç–µ–∑–∏ —Å—Ç—ä–ø–∫–∏, –∑–∞ –¥–∞ —Å—Ç–∞—Ä—Ç–∏—Ä–∞—Ç–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –∏ –¥–∞ –æ—Å–∏–≥—É—Ä–∏—Ç–µ –∑–∞–ø–∏—Å –Ω–∞ —á–µ–∫–ø–æ–π–Ω—Ç–∏—Ç–µ:

### ‚úÖ –°—Ç—ä–ø–∫–∞ 1: –ó–∞—Ä–µ–∂–¥–∞–Ω–µ –Ω–∞ –≤—Å–∏—á–∫–∏ –∫–ª–µ—Ç–∫–∏
- –ò–∑–ø—ä–ª–Ω–µ—Ç–µ –∫–ª–µ—Ç–∫–∏—Ç–µ –µ–¥–Ω–∞ –ø–æ –µ–¥–Ω–∞, –æ—Ç–≥–æ—Ä–µ –Ω–∞–¥–æ–ª—É.
- –£–≤–µ—Ä–µ—Ç–µ —Å–µ, —á–µ –≤—Å–∏—á–∫–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ —Å–∞ –∏–Ω—Å—Ç–∞–ª–∏—Ä–∞–Ω–∏ —É—Å–ø–µ—à–Ω–æ.
- –ê–∫–æ –Ω—è–∫–æ–∏ –∫–ª–µ—Ç–∫–∏ –∑–∞ –∏–Ω—Å—Ç–∞–ª–∏—Ä–∞–Ω–µ –Ω–∞ **Gemini Pro** –¥–∞–≤–∞—Ç –≥—Ä–µ—à–∫–∞ ‚Äî **–º–æ–∂–µ—Ç–µ —Å–ø–æ–∫–æ–π–Ω–æ –¥–∞ –≥–∏ –ø—Ä–µ–º–∞—Ö–Ω–µ—Ç–µ –∏–ª–∏ –ø—Ä–æ–ø—É—Å–Ω–µ—Ç–µ**. –¢–µ –Ω–µ —Å—ä–¥—ä—Ä–∂–∞—Ç API –∏ **–Ω–µ –≤–ª–∏—è—è—Ç –Ω–∞ —Ä–∞–±–æ—Ç–∞—Ç–∞ –Ω–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞**.

### üîó –°—Ç—ä–ø–∫–∞ 2: –°—Ç–∞—Ä—Ç–∏—Ä–∞–Ω–µ –Ω–∞ Cloudflare —Ç—É–Ω–µ–ª–∞
- –í **–ø—Ä–µ–¥–ø–æ—Å–ª–µ–¥–Ω–∞—Ç–∞ –∫–ª–µ—Ç–∫–∞** —â–µ —Å–µ –ø–æ—è–≤–∏ URL –∞–¥—Ä–µ—Å, –∑–∞–ø–æ—á–≤–∞—â —Å `https://trycloudflare.com/...`
- –¢–æ–≤–∞ –µ –ø—É–±–ª–∏—á–Ω–∏—è—Ç –ª–∏–Ω–∫ –∫—ä–º Streamlit –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞.
- –ö–ª–∏–∫–Ω–µ—Ç–µ –≤—ä—Ä—Ö—É –Ω–µ–≥–æ, –∑–∞ –¥–∞ –æ—Ç–≤–æ—Ä–∏—Ç–µ —Ç–∞–±–ª–æ—Ç–æ –≤ –Ω–æ–≤ –ø—Ä–æ–∑–æ—Ä–µ—Ü.

### üì¶ –°—Ç—ä–ø–∫–∞ 3: –ú–∞—É–Ω—Ç–≤–∞–Ω–µ –Ω–∞ Google Drive
- –ó–∞ –¥–∞ —Å–µ –∑–∞–ø–∏—Å–≤–∞—Ç —á–µ–∫–ø–æ–π–Ω—Ç–∏—Ç–µ –∏ –º–æ–¥–µ–ª–∏—Ç–µ, –µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–∞ –º–∞—É–Ω—Ç–Ω–µ—Ç–µ —Å–≤–æ—è Google Drive.
- –ò–∑–ø—ä–ª–Ω–µ—Ç–µ –∫–ª–µ—Ç–∫–∞—Ç–∞ —Å:
  ```python
  from google.colab import drive
  drive.mount('/content/drive')
‚ö†Ô∏è –í–ù–ò–ú–ê–ù–ò–ï: –ë–µ–∑ –º–∞—É–Ω—Ç–Ω–∞—Ç Google Drive, –∞–≥–µ–Ω—Ç–∏—Ç–µ –Ω—è–º–∞ –¥–∞ –º–æ–≥–∞—Ç –¥–∞ –∑–∞–ø–∏—Å–≤–∞—Ç —á–µ–∫–ø–æ–π–Ω—Ç–∏ –∏ –æ–±—É—á–µ–Ω–∏–µ—Ç–æ —â–µ —Å–µ –∑–∞–≥—É–±–∏ –ø—Ä–∏ —Ä–µ—Å—Ç–∞—Ä—Ç –Ω–∞ —Å–µ—Å–∏—è—Ç–∞.
